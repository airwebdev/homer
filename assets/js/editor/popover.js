(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function t(t,o){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,c,l=[],m=!0,i=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;m=!1}else for(;!(m=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);m=!0);}catch(e){i=!0,r=e}finally{try{if(!m&&null!=o.return&&(c=o.return(),Object(c)!==c))return}finally{if(i)throw r}}return l}}(t,o)||function(t,o){if(t){if("string"==typeof t)return e(t,o);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,o):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=wp.blockEditor.BlockControls,n=wp.components,r=n.ToolbarGroup,a=n.ToolbarDropdownMenu,c=wp.i18n.__;const l=function(e){var t=e.onToggle,n=e.openPopup;return React.createElement("div",null,React.createElement(o,null,React.createElement(r,null,React.createElement(a,{icon:homer.icons.popover,label:c("Popover",homer.name),className:"typewriter-toolbar-btn active",controls:[{title:c("Popover: Edit",homer.name),icon:"edit",onClick:n},{title:c("Popover: Remove",homer.name),icon:"trash",onClick:t}]}))))};var m=wp.blockEditor.URLPopover,i=wp.components,p=i.Button,s=i.TextareaControl,u=i.TextControl,h=wp.i18n.__,v=wp.element,f=v.useState;v.useEffect;const b=function(e){var o=e.text,n=e.setText,r=e.fz,a=e.setFz,c=e.anchor,l=e.closePopup,i=t(f(o),2),v=i[0],b=i[1],E=t(f(r),2),d=E[0],y=E[1],R=t(f(!1),2),g=R[0],w=R[1];return React.createElement(m,{className:"homer-popover",anchor:c,placement:"bottom-start",headerTitle:h("Customize Popover",homer.name)},React.createElement("div",{className:"homer-popover-controls actions"},React.createElement(p,{tabindex:-1,className:"homer-button apply",onClick:function(){b(o),y(r),l()}},h("Cancel",homer.name)),React.createElement(p,{disabled:!g,className:"homer-button apply",onClick:function(){n(v),a(d)}},h("Apply changes",homer.name))),React.createElement("div",{className:"homer-popover-controls"},React.createElement(s,{label:"Popover content",value:v,rows:3,onChange:function(e){b(e),w(!0)}})),React.createElement("br",null),React.createElement("div",{className:"homer-popover-controls"},React.createElement(u,{value:d,type:"number",min:1,className:"homer-popover-number",onChange:function(e){y(e),w(!0)},label:h("Font size",homer.name)})))};var E=wp.blockEditor.URLPopover,d=wp.components.Button;wp.i18n.__;const y=function(e){var t=e.openPopup,o=e.anchor,n=e.name,r=e.onToggle;return React.createElement(E,{className:"homer-popover",anchor:o,focusOnMount:!1,placement:"bottom"},React.createElement("div",{className:"homer-popover-controls"},React.createElement("span",{className:"homer-popover-title"},n),React.createElement(d,{icon:"edit",className:"homer-button",onClick:t}),React.createElement(d,{icon:"trash",className:"homer-button trash",onClick:r})))};var R=wp.richText,g=R.toggleFormat,w=R.applyFormat,x=R.useAnchor,N=wp.element,C=N.Fragment,P=N.useState,T=N.useEffect,z=wp.i18n.__,k=homer.name+"/popover",A=wp.i18n.__,_=wp.richText.registerFormatType;window.homer.components.popover=!0,_(homer.name+"/popover",{title:A("Popover",homer.name),tagName:"span",className:"homer-popover",attributes:{text:"data-text",fz:"data-fz",style:"style"},edit:function(e){var o=e.isActive,n=e.value,r=e.onChange,a=e.contentRef,c=e.activeAttributes,m=t(P(c.text?c.text:""),2),i=m[0],p=m[1],s=t(P(c.fz?c.fz:14),2),u=s[0],h=s[1],v=t(P(!1),2),f=v[0],E=v[1],d=x({editableContentElement:a.current,value:n,settings:{tagName:"span",className:"homer-popover",name:k}});T((function(){o&&c.text&&p(c.text),o&&c.fz&&h(c.fz)}),[c]),T((function(){f&&(_(!0),A())}),[i,u]);var R=function(){r(g(n,{type:k}))},N=function(){return E(!0)},A=function(){E(!1)},_=function(){r(w(n,{type:k,attributes:{text:i,fz:u.toString(),style:"--font-size: ".concat(u,"px;")}}))};return React.createElement(C,null,o?React.createElement(C,null,React.createElement(l,{onToggle:R,openPopup:N}),f?React.createElement(b,{text:i,setText:p,fz:u,setFz:h,anchor:d,closePopup:A}):React.createElement(y,{onToggle:R,anchor:d,openPopup:N,name:z("Popover",homer.name)})):"")}})})();